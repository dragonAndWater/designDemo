--遇到一个sysdata数据类型，是type类型
create table yutest
(
    v_cl1 sys.anyData
);

--插入三条数据
INSERT INTO yutest
VALUES (sys.anyData.convertNumber(5));
INSERT INTO yutest
VALUES (sys.anyData.convertDate(SYSDATE));
INSERT INTO yutest
VALUES (sys.anyData.convertVarchar2('test'));

--查询语句
SELECT a.v_cl1.gettypeName()
FROM yutest a;

--创建一个函数来查询我们插入的数据
create or replace function getanydata(v_data in sys.ANYDATA)
    RETURN VARCHAR2 IS
    v_num     NUMBER;
    v_date    DATE;
    v_re_data VARCHAR2(4000);
BEGIN
    CASE v_data.gettypeName
        WHEN 'SYS.NUMBER' THEN IF (v_data.getNumber(v_num) = dbms_types.success) THEN
            v_re_data := v_num;
        END IF;
        WHEN 'SYS.DATE' THEN IF (v_data.getDate(v_date) = dbms_types.success) THEN
            v_re_data := v_date;
        END IF;
        WHEN 'SYS.VARCHAR2' THEN IF (v_data.getVarchar2(v_re_data) = dbms_types.success) THEN
            NULL;
        END IF;
        ELSE v_re_data := 'not number or date or varchar2';
        END CASE;

    RETURN v_re_data;
END getanydata;

select getanydata(v_cl1)
from yutest;